generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["digiduct"]
}

model admin {
  id       Int       @id @default(autoincrement())
  username String    @unique(map: "admin_unique") @db.VarChar
  password String    @db.VarChar
  token    String    @db.VarChar
  email    String    @db.VarChar
  phone    String    @db.VarChar
  add_by   String    @db.VarChar
  add_on   DateTime  @db.Timestamp(6)
  edit_by  String?   @db.VarChar
  edit_on  DateTime? @db.Timestamp(6)
  del_by   String?   @db.VarChar
  del_on   DateTime? @db.Timestamp(6)

  @@schema("digiduct")
}

model category {
  id                   Int                    @id @default(autoincrement())
  name                 String                 @db.VarChar
  add_by               String                 @db.VarChar
  add_on               DateTime               @db.Timestamp(6)
  edit_by              String?                @db.VarChar
  edit_on              DateTime?              @db.Timestamp(6)
  del_by               String?                @db.VarChar
  del_on               DateTime?              @db.Timestamp(6)
  product_category     product_category[]
  product_transactions product_transactions[]

  @@schema("digiduct")
}

/// This model has been renamed to 'packageModel' during introspection, because the original name 'package' is reserved.
model packageModel {
  id                   Int                    @id @default(autoincrement())
  name                 String                 @db.VarChar
  period               Int
  add_by               String                 @db.VarChar
  add_on               DateTime               @db.Timestamp(6)
  edit_by              String?                @db.VarChar
  edit_on              DateTime?              @db.Timestamp(6)
  del_by               String?                @db.VarChar
  del_on               DateTime?              @db.Timestamp(6)
  product_package      product_package[]
  product_transactions product_transactions[]

  @@map("package")
  @@schema("digiduct")
}

model product {
  id                   Int                    @id @default(autoincrement())
  name                 String                 @db.VarChar
  description          String?
  image_path           String                 @db.VarChar
  add_by               String                 @db.VarChar
  add_on               DateTime               @db.Timestamp(6)
  edit_by              String?                @db.VarChar
  edit_on              DateTime?              @db.Timestamp(6)
  del_by               String?                @db.VarChar
  del_on               DateTime?              @db.Timestamp(6)
  product_category     product_category[]
  product_package      product_package[]
  product_transactions product_transactions[]

  @@schema("digiduct")
}

model product_category {
  product_id  Int
  category_id Int
  add_by      String    @db.VarChar
  add_on      DateTime  @db.Timestamp(6)
  edit_by     String?   @db.VarChar
  edit_on     DateTime? @db.Timestamp(6)
  del_by      String?   @db.VarChar
  del_on      DateTime? @db.Timestamp(6)
  category    category  @relation(fields: [category_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  product     product   @relation(fields: [product_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([product_id, category_id], map: "product_category_product_id_category_id_idx")
  @@schema("digiduct")
}

model product_package {
  product_id   Int
  package_id   Int
  price        Int
  stock        Int
  status       Int?         @default(1)
  add_by       String       @db.VarChar
  add_on       DateTime     @db.Timestamp(6)
  edit_by      String?      @db.VarChar
  edit_on      DateTime?    @db.Timestamp(6)
  del_by       String?      @db.VarChar
  del_on       DateTime?    @db.Timestamp(6)
  packageModel packageModel @relation(fields: [package_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  product      product      @relation(fields: [product_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([product_id, package_id], map: "product_package_product_id_package_id_idx")
  @@schema("digiduct")
}

model product_transactions {
  id           Int          @id @default(autoincrement())
  user_id      Int
  product_id   Int
  package_id   Int
  category_id  Int
  price        String       @db.VarChar
  status       String       @default("PENDING") @db.VarChar
  prove_path   String?      @db.VarChar
  review       String?      @db.VarChar
  rating       Int?
  add_by       String       @db.VarChar
  add_on       DateTime     @default(dbgenerated("'2025-08-04 15:33:14.379892'::timestamp without time zone")) @db.Timestamp(6)
  edit_by      String?      @db.VarChar
  edit_on      DateTime?    @db.Timestamp(6)
  del_by       String?      @db.VarChar
  del_on       DateTime?    @db.Timestamp(6)
  category     category     @relation(fields: [category_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  packageModel packageModel @relation(fields: [package_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  product      product      @relation(fields: [product_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user         user         @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("digiduct")
}

model user {
  id                   Int                    @id @default(autoincrement())
  phone                String                 @db.VarChar
  email                String                 @db.VarChar
  status               Int                    @default(1)
  add_by               String                 @db.VarChar
  add_on               DateTime               @default(dbgenerated("'2025-08-04 15:33:14.379892'::timestamp without time zone")) @db.Timestamp(6)
  edit_by              String?                @db.VarChar
  edit_on              DateTime?              @db.Timestamp(6)
  del_by               String?                @db.VarChar
  del_on               DateTime?              @db.Timestamp(6)
  product_transactions product_transactions[]

  @@schema("digiduct")
}
